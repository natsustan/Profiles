# HTTP(S) and SOCKS4(A)/SOCKS5 server on the same port
mixed-port: 7890

# Set to true to allow connections to the local-end server from
# other LAN IP addresses
allow-lan: true

# Clash router working mode
# rule: rule-based packet routing
# global: all packets will be forwarded to a single endpoint
# direct: directly forward the packets to the Internet
mode: rule

# Clash by default prints logs to STDOUT
# info / warning / error / debug / silent
log-level: info

external-controller: :9090

url-rewrite:
- ^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
- ^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
     - '*.lan'
     - localhost.ptlogin2.qq.com
  nameserver:
     - 223.5.5.5
     - 119.29.29.29
     - https://doh.pub/dns-query
     - https://dns.alidns.com/dns-query
  fallback:
     - 8.8.8.8
     - 1.1.1.1
     - tls://1.0.0.1:853
     - tls://dns.google:853
     - https://cloudflare-dns.com/dns-query
     - https://dns.google/dns-query
  fallback-filter:
     geoip: true
     ipcidr:
       - 240.0.0.0/4    

proxies:
  # Trojan
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 01
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20011
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 02
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20012
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 03
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20013
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 04
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20014
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 05
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20015
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 06
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20016
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 07
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20017
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¨ğŸ‡³ Taiwan | 08
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20018
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 01
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20021
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 02
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20022
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 03
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20023
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 04
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20024
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 05
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20025
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 06
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20026
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 07
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20027
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¸ğŸ‡¬ Singapore | 08
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20028
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 01
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20031
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 02
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20032
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 03
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20033
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 04
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20034
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 05
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20035
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 06
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20036
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 07
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20037
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true
  - name: ğŸ‡¯ğŸ‡µ Japan | 08
    type: trojan
    server: oss-cn-guangzhou.westdatacloud.xyz
    port: 20038
    password: 1bec58e8-6ddb-11ed-bbdc-f23c935380ee
    sni: v12.kwaicdn.com
    skip-cert-verify: true

proxy-groups:
  # ç­–ç•¥ç»„ç¤ºä¾‹è¯·æŸ¥é˜… Clash é¡¹ç›® README ä»¥ä½¿ç”¨æœ€æ–°æ ¼å¼ï¼šhttps://github.com/Dreamacro/clash/wiki/configuration

  # ç­–ç•¥ç»„è¯´æ˜

  # ã€ŒMATCHã€ç±»ä¼¼ Surge çš„ã€ŒFinalã€ï¼Œæ­¤å¤„ç”¨äºé€‰æ‹©ç™½åå•æ¨¡å¼(PROXY ç­–ç•¥)å’Œé»‘åå•æ¨¡å¼(DIRECT ç­–ç•¥)

  # ã€ŒStreamingã€å’Œã€ŒStreamingSEã€æ¯”è¾ƒå¥½ç†è§£ï¼Œæœ‰ä¸“ç”¨äºæµåª’ä½“çš„èŠ‚ç‚¹å°±è®¾ç½®åˆ°å…¶ä¸­ï¼Œå¦‚æœæ²¡æœ‰ã€ŒStreamingSEã€çš„éœ€æ±‚å¯ä»¥è¿å¸¦ Rule éƒ¨åˆ†ä¸€èµ·åˆ æ‰ï¼Œã€ŒStreamingã€éœ€è‡³å°‘ä¿ç•™ Ruleï¼Œç”¨ã€ŒPROXYã€å³å¯ã€‚

  # ã€ŒPROXYã€æ˜¯ä»£ç†è§„åˆ™ç­–ç•¥ï¼Œå®ƒå¯ä»¥æŒ‡å®šä¸ºæŸä¸ªèŠ‚ç‚¹æˆ–åµŒå¥—ä¸€ä¸ªå…¶ä»–ç­–ç•¥ç»„ï¼Œå¦‚ï¼šã€Œè‡ªåŠ¨æµ‹è¯•ã€ã€ã€ŒFallbackã€æˆ–ã€Œè´Ÿè½½å‡è¡¡ã€çš„ç­–ç•¥ç»„ï¼Œå…³äºè¿™ 3 ä¸ªç­–ç•¥ç»„çš„å…·ä½“ç¤ºä¾‹å¯ä»¥çœ‹å®˜æ–¹ç¤ºä¾‹ï¼šhttps://github.com/Dreamacro/clash

  - name: Proxies
    type: select
    proxies:
      - SG
      - JP
      - TW

  - name: Apple
    type: select
    proxies:
      - DIRECT
      - Proxies
      - SG
      - JP
      - TW

  - name: MicroSoft
    type: select
    proxies:
      - DIRECT
      - Proxies
      - SG
      - JP
      - TW

  - name: Social
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  - name: YouTube
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  - name: Netflix
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  - name: AmazonPrimeVideo
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  - name: Streaming
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  - name: Nintendo
    type: select
    proxies:
      - Proxies
      - SG
      - JP
      - TW

  # å¹¿å‘Š
  - name: Guard
    type: select
    proxies:
      - REJECT
      - DIRECT

  # ç™½åå•æ¨¡å¼ PROXY, é»‘åå•æ¨¡å¼ DIRECT, ä¸çŸ¥é“åˆ«åŠ¨
  - name: MATCH
    type: select
    proxies:
      - Proxies
      - DIRECT

  - name: TW
    type: select
    proxies:
      - ğŸ‡¨ğŸ‡³ Taiwan | 01
      - ğŸ‡¨ğŸ‡³ Taiwan | 02
      - ğŸ‡¨ğŸ‡³ Taiwan | 03
      - ğŸ‡¨ğŸ‡³ Taiwan | 04
      - ğŸ‡¨ğŸ‡³ Taiwan | 05
      - ğŸ‡¨ğŸ‡³ Taiwan | 06
      - ğŸ‡¨ğŸ‡³ Taiwan | 07
      - ğŸ‡¨ğŸ‡³ Taiwan | 08

  - name: SG
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ Singapore | 01
      - ğŸ‡¸ğŸ‡¬ Singapore | 02
      - ğŸ‡¸ğŸ‡¬ Singapore | 03
      - ğŸ‡¸ğŸ‡¬ Singapore | 04
      - ğŸ‡¸ğŸ‡¬ Singapore | 05
      - ğŸ‡¸ğŸ‡¬ Singapore | 06
      - ğŸ‡¸ğŸ‡¬ Singapore | 07
      - ğŸ‡¸ğŸ‡¬ Singapore | 08

  - name: JP
    type: select
    proxies:
      - ğŸ‡¯ğŸ‡µ Japan | 01
      - ğŸ‡¯ğŸ‡µ Japan | 02
      - ğŸ‡¯ğŸ‡µ Japan | 03
      - ğŸ‡¯ğŸ‡µ Japan | 04
      - ğŸ‡¯ğŸ‡µ Japan | 05
      - ğŸ‡¯ğŸ‡µ Japan | 06
      - ğŸ‡¯ğŸ‡µ Japan | 07
      - ğŸ‡¯ğŸ‡µ Japan | 08


rule-providers:
  # å…³äº Rule Provider è¯·æŸ¥é˜…ï¼šhttps://lancellc.gitbook.io/clash/clash-config-file/rule-provider

  # name: # Provider åç§°
  #   type: http # http æˆ– file
  #   behavior: classical # æˆ– ipcidrã€domain
  #   path: # æ–‡ä»¶è·¯å¾„
  #   url: # åªæœ‰å½“ç±»å‹ä¸º HTTP æ—¶æ‰å¯ç”¨ï¼Œæ‚¨ä¸éœ€è¦åœ¨æœ¬åœ°ç©ºé—´ä¸­åˆ›å»ºæ–°æ–‡ä»¶ã€‚
  #   interval: # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼Œä»…åœ¨ç±»å‹ä¸º HTTP æ—¶å¯ç”¨

  Advertising:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising.yaml
    path: ./Rules/Reject/Advertising.yaml
    interval: 86400

  Advertising_Domain:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising_Domain.yaml
    path: ./Rules/Reject/Advertising_Domain.yaml
    interval: 86400

  # BanAD:
  #   type: http
  #   behavior: domain
  #   url: https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list
  #   path: ./Rules/Reject/BanAD.yaml
  #   interval: 86400  

  Hijacking:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Hijacking/Hijacking.yaml
    path: ./Rules/Reject/Hijacking.yaml
    interval: 86400

  Privacy:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Privacy/Privacy.yaml
    path: ./Rules/Reject/Privacy.yaml
    interval: 86400

  Privacy_Domain:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Privacy/Privacy_Domain.yaml
    path: ./Rules/Reject/Privacy_Domain.yaml
    interval: 86400

  # AdguardDNS:
  #   type: http
  #   behavior: classical
  #   url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AdGuardSDNSFilter/AdGuardSDNSFilter_Classical.yaml
  #   path: ./Rules/Reject/AdGuardSDNSFilter_Classical.yaml
  #   interval: 86400    

  YouTube:
    type: http
    behavior: classical
    path: ./RuleSet/Media/YouTube.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    path: ./RuleSet/Media/Netflix.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    path: ./RuleSet/Media/Spotify.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml
    interval: 86400

  Disney:
    type: http
    behavior: classical
    path: ./RuleSet/Media/Disney.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.yaml
    interval: 86400

  AmazonPrimeVideo:
    type: http
    behavior: classical
    path: ./RuleSet/Media/AmazonPrimeVideo.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AmazonPrimeVideo/AmazonPrimeVideo.yaml
    interval: 86400

  AppleTV:
    type: http
    behavior: classical
    path: ./RuleSet/Media/AppleTV.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AppleTV/AppleTV.yaml
    interval: 86400

  Telegram:
    type: http
    behavior: classical
    path: ./RuleSet/Social/Telegram.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml
    interval: 86400

  Apple:
    type: http
    behavior: classical
    path: ./RuleSet/Apple/Apple.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml
    interval: 86400

  Twitter:
    type: http
    behavior: classical
    path: ./RuleSet/Social/Twitter.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml
    interval: 86400

  Instagram:
    type: http
    behavior: classical
    path: ./RuleSet/Social/Instagram.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Instagram/Instagram.yaml
    interval: 86400

  Nintendo:
    type: http
    behavior: classical
    path: ./RuleSet/Game/Nintendo.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Nintendo/Nintendo.yaml
    interval: 86400

  Global:
    type: http
    behavior: classical
    path: ./RuleSet/Global/Proxy.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global.yaml
    interval: 86400

  China:
    type: http
    behavior: classical
    path: ./RuleSet/China/China.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China.yaml
    interval: 86400

# è§„åˆ™
rules:
  # ç›´è¿å’Œå¹¿å‘Šæ‹¦æˆª
  # - RULE-SET,BanAD,Guard
  - RULE-SET,Advertising,Guard
  - RULE-SET,Advertising_Domain,Guard
  - RULE-SET,Hijacking,Guard
  - RULE-SET,Privacy,Guard
  - RULE-SET,Privacy_Domain,Guard
  # - RULE-SET,AdguardDNS,Guard

  # YouTube å•ç‹¬åˆ†æµ
  - RULE-SET,YouTube,YouTube

  # Streaming å›½é™…æµåª’ä½“æœåŠ¡
  - RULE-SET,Netflix,Netflix
  - RULE-SET,Spotify,Streaming
  - RULE-SET,Disney,Streaming
  - RULE-SET,AppleTV,Streaming
  - RULE-SET,AmazonPrimeVideo,AmazonPrimeVideo

  # SocialMedia åŠ é€Ÿ
  - RULE-SET,Telegram,Social
  - RULE-SET,Twitter,Social
  - RULE-SET,Instagram,Social

  # Switch åŠ é€Ÿ
  - RULE-SET,Nintendo,Nintendo

  # Apple æœåŠ¡
  - RULE-SET,Apple,Apple

  # Global å…¨çƒåŠ é€Ÿ
  - RULE-SET,Global,Proxies

  # China ä¸­å›½ç›´è¿
  - RULE-SET,China,DIRECT

  # # Local Area Network å±€åŸŸç½‘
  # - RULE-SET,LAN,DIRECT

  # GeoIP China
  - GEOIP,CN,DIRECT

  - MATCH,MATCH